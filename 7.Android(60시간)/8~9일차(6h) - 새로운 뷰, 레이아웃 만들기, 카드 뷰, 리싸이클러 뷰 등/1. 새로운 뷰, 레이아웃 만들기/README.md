# 새로운 뷰 만들기

- API에서 제공하는 위젯을 사용하면 거의 대부분의 화면을 만들 수 있습니다. 하지만 여러분이 원하는기능을 가진 위젯을 따로 구상해야 할 때는 새로운 뷰 위젯을 만들어야 합니다. 이번에는 API에서 제공하는 뷰를 사용해서 새로운 뷰를 정의해 보겠습니다.

- API에서 제공하는 뷰를 사용하려면 API의 뷰를 상속해야 합니다. 그리고 API의 뷰를 상속하여 새로운 뷰를 만들 때는 뷰가 그려지는 방법을 반드시 이해해야 합니다. 뷰의 영역과 크기는 그 뷰를 포함﻿하고 있는 레이아웃의 영향을 받아 정해집니다. 이때 개발자가 뷰의 상태에 따라 추가적인 코드를 넣을 수 있도록 콜백 메서드가 호출됩니다. 뷰가 스스로의 크기를 정할 때 자동으로 호출되는 메서드는 onMeasure이고 스스로를 레이아웃에 맞게 그릴 때는 onDraw 메서드가 자동으로 호출됩니다.

```java
public void onMeasure (int widthMeasureSpec, int heightMeasureSpec)
public void onDraw(Canvas canvas)
```

- onMeasure 메서드의 파라미터로 전달되는 widthMeasurespec과 heightMeasureSpec은 이 뷰를 담고 있는 레이아웃에서 이 뷰에게 허용하는 여유 공간의 폭과 높이에 대한 정보입니다. 즉, 부모 컨테이너에서 여유 공간에 대한 정보를 전달하는데 이 값을 참조하여 뷰가 보일 적절한 크기를 반환하면 이 크기 값으로 뷰가 그려지게 됩니다. onMeasure 메서드 안에서 이 뷰를 담고 있는 레이아웃에게 이 뷰의 크기 값을 반환하고 싶다면 다음 메서드를 사용합니다.

```java
void setMeasuredDimension (int measuredWidth, int measuredHeight)
```

- 이 메서드의 두 파라미터는 뷰의 폭과 높이 값이 됩니다.

## onDraw 메서드와 invalidate 메서드 이해하기

- 뷰가 화면에 보일 때는 onDraw 메서드가 호출됩니다. 예를 들어, 버튼의 경우에 그림으로 된 아이콘이나 글자가 그 위에 표시되려면 먼저 그 버튼을 담고 있는 레이아웃에 따라 버튼의 위치와 크기가 정해져야 합니다. 그런 다음 버튼의 모양과 그 안의 아이콘 또는 글자를 화면상에 그려주는 과정을 거치게 됩니다. 이렇게 그려지는 과정에서 호출되는 onDraw 메서드를 다시 정의하면 여러분이 보여주려는 내용물을 버튼 위에 그릴 수 있습니다.



