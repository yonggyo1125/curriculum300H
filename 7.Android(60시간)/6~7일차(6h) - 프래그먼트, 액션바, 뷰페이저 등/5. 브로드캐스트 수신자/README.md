# 브로드캐스트 수신자 이해하기

- 안드로이드에서 브로드캐스팅(Broadcasting)이란 메시지를 여러 객체에 전달하는 것을 말합니다. 잘 이해되지 않으면 카카오톡에서 여러 사람에게 메시지를 전달할 때 그룹 채팅방을 만들어 메시지를 전달하는 것을 상상해 보세요. 마찬가지로 안드로이드도 여러 앱 구성 요소에 메시지를 전달할 때 브로드캐스팅을 사용합니다.

- 예를 들어, 다른 사람으로부터 문자를 받았을 때 이 문자를 SMS 수신 앱에 알려줘야 한다면 브로드캐스팅으로 전달하면 됩니다. 이런 메시지 전달 방식은 단말 전체에 적용될 수 있겠죠? 그래서 이런 메시지 전달 방식을 '<b>글로벌 이벤트(Global Event)</b>'라고 부릅니다. 글로벌 이벤트의 대표적인 예로는 '전화가 왔습니다.', '문자 메시지가 도착했습니다.'와 같은 사용자 알림을 들 수 있습니다.

- 여러분이 만든 앱에서 브로드캐스팅 메시지를 받고 싶다면 <b>브로드캐스트 수신자(Broadcast Receiver)</b>를 만들어 앱에 등록하면 됩니다. 다시 말해, 기기 안에서 동작하는 다른 앱 A로부터 특정 메시지를 받기 위해 여러분이 만든 앱에 브로드캐스트 수신자를 등록하면 A 앱의 메시지가 여러분이 만든 앱으로 전달됩니다. 이때 서비스와 마찬가지로 브로드캐스트 수신자도 앱 구성 요소입니다. 따라서 새로운 브로드캐스트 수신자를 만들면 새로 등록해야 시스템이 알 수 있습니다. 단, 브로드캐스트 수신자는 매니페스트 등록 방식이 아닌 소스 코드에서 <b>registerReceiver 메서드</b>를 사용해 시스템에 등록할 수 있습니다. 소스 코드를 이용하여 브로드캐스트 수신자를 등록하면 액티비티 안에서 브로드캐스트 메시지를 전달받아 바로 다른 작업을 수행하도록 만들 수 있는 장점이 있습니다.

## 브로드캐스트 수신자 등록하고 사용하기

- 브로드캐스트 수신자에는 <b>onReceive 메서드</b>를 정의해야 합니다. 이 메서드는 원하는 브로드캐스트 메시지가 도착하면 자동으로 호출됩니다. 하지만 시스템의 모든 메시지를 받을 수는 없습니다. 만약 원하는 메시지만 받으려면 어떻게 해야 할까요? 모든 메시지는 인텐트 안에 넣어 전달되므로 <b>원하는 메시지는 인텐트 필터를 사용해 시스템에 등록</b>하면 됩니다. 구체적인 내용은 실습을 통해 알아보겠습니다.

- 브로드캐스트 수신자를 만들어 SMS 문자를 받아볼 수 있게 새로운 프로젝트를 만들겠습니다. 프로젝트 이름은 SampleReceiver로 하고 패키지 이름은 org.koreait.receiver로 하여 새로운 프로젝트를 만듭니다. 새로운 프로젝트 창이 열리면 왼쪽 프로젝트 영역에서 app 폴더를 선택한 후 마우스 오른쪽 버튼을 누릅니다. 팝업 메뉴가 보이면 [New → Other → Broadcast Receiver] 메뉴를 선택합니다. 그﻿러면 새로운 브로드캐스트 수신자를 만들 수 있는 대화상자가 표시됩니다. Class Name:에 SmsReceiver를 입력한 후 [Finish] 버튼을 누릅니다.



- 새로운 브로드캐스트 수신자가 만들어지면 java 폴더 아래의 org.koreait.receiver 폴더에 SmsReceiver.java 파일이 생성됩니다. 그리고 AndroidManifest.xml 파일 안에는 \<receiver\> 태그가 추가니다. 이미 알고 있는 것처럼 AndroidManifest.xml 파일 안에는 앱 구성 요소를 등록해야 하며 새로 만들어진 브로드캐스트 수신자도 앱 구성 요소이므로 이 파일에 자동으로 등록됩니다. 그러면 먼저 AndroidManifest.xml 파일을 열고 다음 코드처럼 수정합니다.

```
```
 