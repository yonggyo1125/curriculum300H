# 액션바 사용하기

## 화면에 메뉴 기능 넣기

- 안드로이드와 아이폰의 차이점 중의 하나는 화면 아래쪽에 있는 [메뉴] 버튼과 [BACK] 버튼의 유무입니다. 아이폰의 아래쪽에는 버튼이 하나(홈 버튼)만 있거나 없지만 안드로이드의 화면 아래쪽에는 버튼이 세 개([홈] 버튼, [메뉴] 버튼, [BACK] 버튼) 있습니다. 그래서 안드로이드 단말은 [메뉴] 버튼을 눌렀을 때 숨어있던 메뉴가 보인다는 것을 자연스럽게 알 수 있습니다.

- 그런데 이렇게 시스템 [메뉴] 버튼을 눌렀을 때 숨어있던 메뉴가 보이도록 할 수도 있고 앱의 상단 타이틀 부분에 [메뉴] 버튼을 배치하고 그것을 눌렀을 때 메뉴가 보이도록 할 수도 있습니다. 이런 메뉴를 <b>옵션 메뉴(Option Menu)</b>라고 부릅니다. 그리고 옵션 메뉴와 다르게 입력상자를 길게 눌러 나타나는 '복사하기', '붙여넣기' 등의 팝업 형태의 메뉴는 <b>컨텍스트 메뉴(Context Menu)</b>라고 합니다. <b>옵션 메뉴는 각각의 화면마다 설정할 수 있으며 컨텍스트 메뉴는 각각의 뷰마다 설정할 수 있습니다.</b>

|속성|설명|
|----|--------|
|옵션 메뉴|시스템 [메뉴] 버튼을 눌렀을 때 나타나는 메뉴로 각 화면마다 설정할 수 있는 주요 메뉴입니다.|
|컨텍스트 메뉴|화면을 길게 누르면 나타나는 메뉴로 뷰에 설정하여 나타나게 할 수 있습니다. 텍스트뷰의 편집 상태를 바꾸거나 할때 사용합니다.|


- 옵션 메뉴는 액션바(Action Bar)에 포함되어 보이도록 만들어져 있습니다. 여기에서 액션바는 앱의 제목(Title)이 보이는 위쪽 부분을 말합니다. 옵션 메뉴와 컨텍스트 메뉴는 각각의 액티비티마다 설정할 수 있으므로 액티비티에 추가하고 싶은 경우에는 다음의 두 메서드를 다시 정의하여 메뉴 아이템을 추가합니다.

```java
public boolean onCreateOptionsMenu (Menu menu)
public void onCreateContextMenu (ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo)
```

- 즉, 두 메서드를 다시 정의하기만 하면 매우 쉽게 메뉴를 추가할 수 있습니다. 이 두 개의 메서드를 보면 Menu ContextMenu 객체가 전달되는 것을 알 수 있는데 이 객체의 add 메서드를 사용해서 메뉴 아이템을 추가하게 됩니다. 메뉴 아이템을 추가할 수 있는 대표적인 메서드들은 다음과 같습니다.

```java
MenuItem add (int groupId, int itemId, int order, CharSequence title)
MenuItem add (int groupId, int itemId, int order, int titleRes)
SubMenu addSubMenu (int titleRes)
```

- groupid 값은 아이템을 하나의 그룹으로 묶을 때 사용합니다. itemld는 아이템이 갖는 고유 ID 값으로, 아이템이 선택되었을 때 각각의 아이템을 구분할 때 사용할 수 있습니다. 아이템이 많아서 서브 메뉴로 추가하고 싶을 때는 addSubMenu 메서드를 사용합니다. 그런데 이렇게 코드에서 메뉴를 추가하는 것보다는 XML에서 메뉴의 속성을 정의한 후 객체로 로딩하여 참조하는 것이 더 간단합니다.

- 이제 메뉴 기능을 확인해보기 위해 새로운 SampleOptionMenu 프로젝트를 만듭니다. 이때 패키지 이름은 org.koreait.menu로 수정합니다. 새로운 프로젝트가 만들어지면 /app/res 폴더 안에 새로운 menu 폴더를 만들겠습니다. /app/res 폴더를 선택한 상태에서 마우스 오른쪽 버튼을 누르고 [New → Directory] 메뉴를 선택합니다. 새로운 폴더 이름을 입력하라는 대화상자가 보이면 menu를 입력하고 [OK] 버튼을 누릅니다. 새로 만들어진 /app/res/menu 폴더를 선택한 상태에서 마우스 오른쪽 버튼을 눌러 나타난 메뉴 중에서 [New → Menu resource file] 메뉴를 선택합니다. 이 폴더 안에는 메뉴를 정의하는 XML 파일이 만들어집니다. 대화상자가 보이면 File name에 menu_main.xml을 입력한 후 [OK] 버튼을 누릅니다.

- 안드로이드 스튜디오는 /app/res/menu 폴더안에 메뉴를 위한 XML 파일이 만들어진다는 것을 미리 알고 있습니다. 따라서 메뉴를 위한 XML 파일은 반드시 menu 폴더 안에 들어 있어야 합니다. /app/res/drawable 폴더 안에는 학습 소스에 있는 세 개의 이미지 파일(menu_refresh.png, menu_search.png, menu_settings.png 파일)을 복사해서 넣어 놓습니다. 물론 여러분이 원하는 이미지를 넣어도 됩니다. 그리고 menu_main.xml 파일 안에는 다음과 같이 세 개의 \<item\> 태그를 추가합니다. 이때 \<menu\> 태그의 xmlns:app도 꼭 입력하세요. 그래야 \<item\> 태그의 showAsAction이 제대로 인식됩니다.

